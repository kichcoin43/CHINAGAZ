# Инструкция по развертыванию проекта на Render.com

## Подготовка

В этой директории содержатся все необходимые файлы для деплоя приложения на Render.com. Эта директория была создана из полного проекта Replit, но содержит только файлы, необходимые для деплоя.

## Состав директории

- `package.json` - зависимости и скрипты приложения
- `render.yaml` - конфигурация инфраструктуры Render.com
- `build.sh` - скрипт сборки для Render.com
- `start.sh` - скрипт запуска для Render.com
- `data/` - директория с базой данных и резервными копиями
- `server/` - серверная часть приложения
- `client/src/` - исходный код клиентской части
- `shared/` - общие типы и схемы
- `scripts/` - вспомогательные скрипты для работы с приложением

## Шаги по развертыванию на Render.com

1. Загрузите содержимое этой директории в новый репозиторий GitHub
2. Войдите в аккаунт Render.com и создайте новый Web Service:
   - Source: ваш репозиторий GitHub
   - Branch: main (или другая ветка с кодом)
   - Runtime: Node.js
   - Build Command: `chmod +x build.sh && ./build.sh`
   - Start Command: `chmod +x start.sh && ./start.sh`

3. Создайте Disk Volume:
   - Name: [имя-проекта-data]
   - Mount Path: `/opt/render/project/src/data`
   - Size: 1 GB (или больше по необходимости)

4. Добавьте следующие переменные окружения:
   - `NODE_ENV=production`
   - `RENDER=true` 
   - `TELEGRAM_BOT_TOKEN=ваш_токен_бота`

5. Сохраните настройки и нажмите "Create Web Service".

После успешного развертывания, приложение будет доступно по URL, предоставленному Render.com.

## База данных

При первом запуске на Render.com, будет автоматически создана пустая база данных. Если вы хотите восстановить данные из резервной копии, вы можете использовать API или CLI Render.com для доступа к терминалу и выполнить скрипт восстановления, как описано в файле `DATABASE_BACKUP_RESTORE.md`.

## Важная информация

- Проект настроен на использование постоянного хранилища данных через Disk Volume на Render.com.
- Автоматически создаются резервные копии базы данных по расписанию.
- Все WebSocket соединения автоматически переключаются на HTTP-запросы в среде HTTPS Telegram WebApp.

## Документация

Подробные инструкции по развертыванию и управлению базой данных можно найти в следующих документах:
- `RENDER_DEPLOYMENT_GUIDE.md` - Руководство по деплою на Render.com
- `DATABASE_BACKUP_RESTORE.md` - Инструкции по резервному копированию и восстановлению базы данных